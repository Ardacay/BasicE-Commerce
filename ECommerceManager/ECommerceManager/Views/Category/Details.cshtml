@model ECommerceManager.Dtos.Categories.CategoryDto   

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Category</h4>
    <hr/>
    <dl class="row">

        <dt class="col-sm-2"> id </dt>
        <dd class="col-sm-10" id="cat-id"></dd>
        </dd>
        <dt class="col-sm-2">Name
        </dt>
        <dd class="col-sm-10" id="cat-name"> </dd>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model?.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>

</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get("id");

        if (!id) {
            alert("category id not found in query string");
            return;
        }
        fetch(`/Category/GetCategoryDetails?Id=${id}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error("veri alınamadı")
                }
                return response.json();
            })
            .then(data => {
                document.getElementById("cat-id").textContent = data.Id;
                document.getElementById("cat-name").textContent = data.Name;
            })
            .catch(error => {
                console.error("Error Fetching", error);
            });
    });
</script>